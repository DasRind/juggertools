@mixin legal-page-styles($accent: #2e5bd6) {
  :host {
    display: block;
    padding: clamp(1.5rem, 1.5rem + 2vw, 3.5rem)
      clamp(1rem, 1rem + 2vw, 4rem)
      clamp(2.5rem, 2rem + 2vw, 4rem);
    color: var(--color-text);
    background: var(--color-surface);
    transition: color 0.3s ease, background-color 0.3s ease;
  }

  .legal-shell {
    max-width: 60rem;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }

  .legal-state {
    display: inline-flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem 1.25rem;
    border-radius: 0.75rem;
    border: 1px solid rgba(125, 146, 191, 0.35);
    background: color-mix(in srgb, var(--color-surface) 88%, #b8c7e6 12%);
    color: var(--color-text);

    &--loading .spinner {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      border: 2px solid rgba(99, 102, 241, 0.35);
      border-top-color: $accent;
      animation: spin 0.9s linear infinite;
    }

    &--error {
      border-color: rgba(217, 119, 6, 0.45);
      background: color-mix(in srgb, var(--color-surface) 82%, #fbbf24 18%);
    }

    p {
      margin: 0;
    }

    button {
      margin-left: auto;
      background: $accent;
      color: var(--accent-on-blue, #f4f7ff);
      border: 0;
      border-radius: 999px;
      padding: 0.45rem 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.15s ease, box-shadow 0.2s ease, filter 0.2s ease;
      box-shadow: 0 6px 16px rgba(46, 91, 214, 0.2);

      &:hover {
        transform: translateY(-1px);
        filter: brightness(1.05);
        box-shadow: 0 10px 22px rgba(46, 91, 214, 0.25);
      }

      &:focus-visible {
        outline: 2px solid color-mix(in srgb, $accent 70%, #ffffff 30%);
        outline-offset: 2px;
      }

      &:active {
        transform: translateY(0);
        filter: brightness(0.98);
      }
    }
  }

  .legal-markdown {
    display: block;
    line-height: 1.65;
    font-size: 1.05rem;
    color: inherit;

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      font-weight: 600;
      margin: 0 0 1rem;
      line-height: 1.25;
    }

    h1 {
      font-size: clamp(2rem, 1.8rem + 1vw, 2.8rem);
      margin-bottom: 0.5rem;
    }

    h2 {
      font-size: clamp(1.4rem, 1.2rem + 0.6vw, 1.8rem);
      margin-top: 2rem;
    }

    p {
      margin: 0 0 1rem;
    }

    ul {
      margin: 0 0 1.25rem 1.25rem;
      padding: 0;

      li {
        margin-bottom: 0.6rem;
      }
    }

    hr {
      border: none;
      height: 1px;
      margin: clamp(1.6rem, 1.2rem + 2vw, 2.2rem) 0;
      background: linear-gradient(
        to right,
        transparent,
        rgba(125, 146, 191, 0.45),
        transparent
      );
    }

    blockquote {
      margin: 1.5rem 0;
      padding: 1rem 1.25rem;
      border-left: 4px solid rgba(217, 119, 6, 0.55);
      background: color-mix(in srgb, var(--color-surface) 88%, #fcd34d 12%);
      border-radius: 0.5rem;

      p {
        margin: 0;
      }
    }

    a {
      color: $accent;
      font-weight: 600;
      text-decoration: none;
      position: relative;

      &::after {
        content: '';
        position: absolute;
        left: 0;
        bottom: -0.2rem;
        width: 100%;
        height: 2px;
        background: currentColor;
        opacity: 0;
        transform: scaleX(0.3);
        transform-origin: left;
        transition: opacity 0.2s ease, transform 0.2s ease;
      }

      &:hover::after,
      &:focus-visible::after {
        opacity: 1;
        transform: scaleX(1);
      }

      &:focus-visible {
        outline: none;
      }
    }

    code {
      display: inline-block;
      padding: 0.1rem 0.35rem;
      border-radius: 0.4rem;
      background: color-mix(in srgb, var(--color-surface) 85%, #c7d6ff 15%);
      font-family: 'JetBrains Mono', 'Fira Code', ui-monospace, SFMono-Regular,
        SFMono, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New',
        monospace;
      font-size: 0.95rem;
    }
  }

  @media (max-width: 640px) {
    :host {
      padding: 1.5rem 1rem 3rem;
    }

    .legal-shell {
      gap: 1.5rem;
    }
  }

  @keyframes spin {
    to {
      transform: rotate(360deg);
    }
  }

  :host-context(.theme-dark) {
    background: color-mix(in srgb, var(--color-bg, #0f172a) 92%, #111827 8%);
    color: var(--color-text, #e5e7eb);

    .legal-state {
      border-color: rgba(99, 102, 241, 0.3);
      background: color-mix(in srgb, var(--color-surface) 70%, #1e293b 30%);

      &--error {
        border-color: rgba(217, 119, 6, 0.45);
        background: color-mix(in srgb, var(--color-surface) 72%, #92400e 28%);
      }
    }

    .legal-markdown {
      blockquote {
        background: color-mix(in srgb, var(--color-surface) 70%, #78350f 30%);
        border-left-color: rgba(249, 115, 22, 0.7);
      }

      code {
        background: color-mix(in srgb, var(--color-surface) 70%, #1f2937 30%);
      }
    }
  }
}
